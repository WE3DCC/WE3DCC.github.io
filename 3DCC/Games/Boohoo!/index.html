<html>
    <head>
        <title>We3D.CC:BooHoo!.Altspacevs</title>
        <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
        <script src="https://sdk.altvr.com/libs/altspace.js/2.7.0/altspace.min.js"></script>
        <script>AFRAME.registerComponent('hidertwo', {
            init: function () {
                var entity = this.el.object3D;
                var hideTimes = 0;
                entity.addEventListener('cursordown', function() {
                        var max = 70;
                        var min = -70;
                        var ymin = -2;
                        var ymax = 30;
                        var newHidingSpotx = Math.floor(Math.random() * (max - min)) + min;
                        var newHidingSpoty = Math.floor(Math.random() * (ymax - ymin)) + ymin;
                        var newHidingSpotz = Math.floor(Math.random() * (max - min)) + min;
                        entity.position.set(newHidingSpotx, newHidingSpoty, newHidingSpotz);
                        hideTimes +=1;
                        console.log('Hidden: ' + hideTimes);
                        console.log(this.position);
                        });
                    if (hideTimes > 5){
                        this.el.object3DMap['mesh'].visible = false;
                    };
                },
            });
    </script>
    </head>
    <body>
        <a-scene debug fog="type: linear; color: #AAA" altspace="fullspace: true" sync-system="author: we3dcc; app: BooHoo!">
            <a-assets>
                <a-asset-item id="boohooObj" src="models/BooHootheGhost.obj"></a-asset-item>
                <a-asset-item id="boohooMtl" src="models/BooHootheGhost.mtl"></a-asset-item>
                <a-asset-item id="boohooObj" src="models/BooHootheGhost.obj"></a-asset-item>
                <a-asset-item id="boohooMtl" src="models/BooHootheGhost.mtl"></a-asset-item>
                <!-- Environment Model Setup-->
                <a-asset-item id="Terrainobj" src="models/Terrain01.obj"></a-asset-item>
                <a-asset-item id="Terrainmtl" src="models/Terrain01.mtl"><a-asset-item>
                <a-asset-item id="CandyCaneobj" src="models/CandyCane01.obj"></a-asset-item>
                <a-asset-item id="CandyCanemtl" src="models/CandyCane01.mtl"></a-asset-item>
                <a-asset-item id="RockCandyTreeobj" src="models/RockCandyTree.obj"></a-asset-item>
                <a-asset-item id="RockCandyTreemtl" src="models/RockCandyTree.mtl"></a-asset-item>

                <!-- Scene Testers -->
                <a-mixin id="coneGeo" geometry="primitive: cone; radius-top: 0; radius-bottom: 0.5" material="color: grey"></a-mixin>
                <a-mixin id="sphereGeo" geometry="primitive: sphere; radius: 0.5;" material="color: grey"></a-mixin>
                <a-mixin id="yoyoAni" attribute="position" direction="alternate"
                    dur="3000" fill="forwards" to="1 1 1"repeat="indefinite"></a-mixin>
            </a-assets>

            <!-- Cardboard Camera -->
            <a-entity position="0 1.8 2">
				<a-entity camera look-controls>
				  <a-cursor position="0 0 -1.25"
                        fill="forwards" from="4 4 4" to="0.1 0.1 0.1" dur="1500" end="mouseleave"></a-animation>
                        <a-animation begin="mouseleave" dur="50" easing="ease-out-bounce" attribute="scale"
                            fill="forwards" from="1 1 1" to="1 1 1" ></a-animation>
                        <a-animation begin="click" dur="20" easing="ease-out-bounce" attribute="scale"
                            fill="forwards" direction="backwards" from="0.5 0.5 0.5" to="1 1 1" ></a-animation>
                    </a-cursor>
				</a-entity>
			  </a-entity>
                <!-- Game logic script -->


            <!--n-mesh-collider="convex: false; height: 2; radius: 2; type: 'object'" -->
            <a-obj-model src="#boohooObj" mtl:"#boohooMtl" id="BooHoo1"
            position="-2 1 -2"
            collapse-model
            hidertwo
            n-sound="res: ui/select; volume: 7; on: cursordown"
            altspace-cursor-collider="enabled: true"
            sync="own-on: cursordown" sync-transform>
            <a-animation attribute="rotation" dur="3000" easing="linear" to="0 360 0" direction="forwards" repeat="indefinite"></a-animation>
            </a-obj-model>

            <a-entity>
                <a-entity mixin="sphereGeo yoyoAni"></a-entity>
            </a-entity>

        </a-scene>
    </body>
</html>
