<html><head>
    <script src="https://aframe.io/releases/0.3.0/aframe-inspector.min.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script> AFRAME.registerComponent('BooHider', function (){
            init: function () {
                var ArraySpots = [];
                for (var i = 0; i <= 20; i++ ) {
                    var HideIndex = 0;
                    var min = -20;
                    var max = 20;
                    var ymin = 0;
                    var xspot = Math.floor((Math.random() * (max-min)) + min);
                    var yspot = Math.floor((Math.random() * (max-ymin)) + ymin);
                    var zspot = Math.floor((Math.random() * (max-min)) + min);
                    var nextrandomspotposition = AFRAME.utils.coordinates.parse("xspot yspot zspot");
                    ArraySpots.push(nextrandomspotposition);
                    console.log(ArraySpots);
                    });
                };
            update: function () {
                this.el.addEventListener('click', function () {
                    var HideIndex = HideIndex + 1;
                    this.setAttribute("visible", false);
                    this.setAttribute("position", ArraySpots[HideIndex]);
                });
                entity.addEventListener('componentchanged', function (evt) {
                if (evt.detail.name === 'position') {
                    this.setAttribute("visible", true);
                    console.log('Entity has moved from', evt.detail.oldData, 'to', evt.detail.newData, '!');
                    };
                });
            };
          });</script>
     </head>
     <body>
            <body>
                    <a-scene>
                        <a-assets timeout="5000">
                                <a-asset-item id="boohooObj" src="BooHootheGhost.obj"></a-asset-item>
                                <img id="boohooMtl" src="BooHootheGhost.mtl">
                                
                                <a-mixin id="voxel-axe"
                                geometry='primitive: box; width: .9; depth: .1; height: .03' material='shader: flat; color: #606060'
                                position='.5 0 0' scale="1 1 1"
                                animation="property: rotation; from: 0 0 0; to: 360 0 0; dir: reverse; startEvents: spin"></a-mixin>
                            
                            <a-mixin id="parent-to-left-hand"
                                rotation="0 0 0"
                                n-skeleton-parent="part: hand; side: left;"
                                sync sync-n-skeleton-parent></a-mixin> 
                        
                                
                            <a-mixin id="boohoo"
                            obj-model="obj: #boohooObj; mtl: #boohooMtl"
                            altspace-cursor-collider
                            scale="0.52 0.52 0.52"
                            roation="0 45 0"
                            ></a-mixin>
                            <!--  Environment    -->
                                    <a-mixin id="flap" attribute="rotation" direction="alternate" repeat="indefinite"></a-mixin>
                                    <a-mixin id="rotate" attribute="rotation" repeat="indefinite"></a-mixin>
                                    <a-mixin id="wing" geometry="primitive: box; depth: .005; height: 1; width: 0.5" material="color: #9D0B28" rotation="0 0 0" pivot="0.25 0 0" scale="1 1.25 1"></a-mixin>
                             
                                  <!-- Bat with pivoting wings. -->
                                  <a-entity position="0 2.5 -5" rotation="" scale="" visible="">
                                    <a-animation mixin="rotate" to="0 360 0" dur="3000" easing="linear"></a-animation>
                                    <a-entity rotation="0 90 0" position="2.5 0 0" scale="" visible="">
                                      <a-entity rotation="-45 0 90" position="" scale="" visible="">
                                        <a-entity mixin="wing" position="" rotation="" scale="" visible="" geometry="" material="" pivot="">
                                          <a-animation mixin="flap" to="0 120 0"></a-animation>
                                        </a-entity>
                                      </a-entity>
                                      <a-entity rotation="-45 0 90" position="" scale="" visible="">
                                        <a-entity mixin="wing" position="" rotation="" scale="" visible="" geometry="" material="" pivot="">
                                          <a-animation mixin="flap" to="0 -120 0"></a-animation>
                                        </a-entity>
                                      </a-entity>
                                    </a-entity>
                                  </a-entity>
                                
                            <a-mixin id="parent-to-head"
                                position="0 0.05 0.03"
                                n-skeleton-parent="part: head; side: right"
                                sync sync-n-skeleton-parent></a-mixin>
            
                            <a-mixin id="left-box"
                                geometry="primitive: box"
                                material="color: red"
                                n-skeleton-parent="part: hand; side: left; index: 0;"
                                sync sync-n-skeleton-parent
                                position="0 0.1 0"
                                rotation="0 45 0"
                                scale="0.1 0.1 0.1">
                            </a-mixin>
                    
                            <a-mixin id="body-ball"
                                position="0 0.25 -0.25"
                                n-spawner="res:interactables/basketball"
                                n-skeleton-parent="part: spine;"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                    
                            <a-mixin id="spinal-tap"
                                n-sound="res: ui/error; volume: 0.5; loop: true; autoplay: true;"
                                n-skeleton-parent="part: spine;"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                    
                            <a-mixin id="other-text"
                                position="0 1.5 0"
                                rotation="0 180 0"
                                scale="0.5 0.5 0.5"
                                n-text="fontSize: 2; text: text other people can read"
                                n-skeleton-parent="part: hips;"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                            
                    
                            <a-mixin id="head-text"
                                position="0.2 0.2 -0.5"
                                scale="0.1 0.1 0.1"
                                n-text="fontSize: 2; text: avoid text on the head \n annoying isn't it :-)"
                                n-skeleton-parent="part: head;"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                    
                            <a-mixin id="headache"
                                n-object="res:effects/fire"
                                n-skeleton-parent="part: head;"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                    
                            <a-mixin id="fire-fist"
                                n-object="res:effects/fire-trail"
                                n-skeleton-parent="part: hand; side: right"
                                sync sync-n-skeleton-parent>
                            </a-mixin>
                        </a-assets>
                        <!-- The Mobile 0D Camera with reticle -->
                        <a-entity position="0 2.2 4">
                                <a-entity camera look-controls>
                                    <a-entity cursor="maxDistance: 30; fuse: true; fuseTimeout: 1600" position="0 0 -3"
                                            geometry="primitive: ring; radiusOuter: 0.30;
                                                        radiusInner: 0.20;"
                                            material="color: cyan; shader: flat">
                                    <a-animation begin="mouseenter" easing="linear" attribute="scale"
                                            fill="forwards" from="4 4 4" to="0.1 0.1 0.1" dur="1500" end="mouseleave"></a-animation>
                        <a-animation begin="mouseleave" dur="50" easing="ease-out-bounce" attribute="scale"
                                            fill="forwards" from="1 1 1" to="1 1 1" ></a-animation> 
                        <a-animation begin="click" dur="20" easing="ease-out-bounce" attribute="scale"
                                            fill="forwards" direction="backwards" from="0.5 0.5 0.5" to="1 1 1" ></a-animation>
                        </a-entity>
                    </a-entity>
                    </a-entity>
                        <!-- End Assets -->
                        <!-- NEED: Flashlight Raycaster model
                            <!-- Cursor 
                        <a-entity
                            raycaster="far: 30; interval:1000; objects: .clickable"
                            position="0 0 -1"
                            rotation="45 0 90"
                            geometry="primitive: cone; height: 5; color: #EAE112; radius-top: 0.5; radius-bottom: 3"
                            material="color: #54EA12; shader: flat; opacity"></a-entity>
                        <a-entity
                        id="initial-synced-box"
                        one-per-user="mixin: voxel-axe parent-to-left-hand">
                    </a-entity>
                
                    <!-- BooHoo Instantiator -->
                    <a-entity
                        id="boohoo-instantiator"
                        class="clickable"
                        mixin="boohoo"
                        BooHider
                        animation="attribute: rotation; to: 45 2 0; ease: cubic; direction: alternate fill: forwards; repeat: indefinite begin: mouseenter"
                        sync="own-on: click" sync-transform sync-color></a-entity>
            
                        <a-entity id="sky" geometry="primitive: sphere; radius: 100;" material="shader: sky; side: back" sun-position-setter="" position="" rotation="" scale="" visible="">
                                <a-entity id="orbit" position="" rotation="" scale="" visible="">
                                  <a-animation attribute="rotation" from="0 0 0" to="0 360 0" dur="5000" repeat="indefinite" easing="linear"></a-animation>
                                </a-entity>
                              </a-entity>
            
    
                        <a-entity one-per-user="mixin: spinal-tap"></a-entity>
                    
                        <a-entity
                            position="0 1 -1"
                            scale="0.5 0.5 0.5"
                            n-text="fontSize: 2; text: text in the world">ลยก`963-
                        </a-entity>
                    
                        <a-entity
                            position="0 0 -0.7"
                            scale="0.2 0.2 0.2"
                            rotation="-30 0 0"
                            n-text="fontSize: 2; text: Find and click on Boo the Ghost!"
                            n-cockpit-parent>
                        </a-entity>
                    
                        <a-entity one-per-user="mixin: head-text"></a-entity>
                    
                        <a-entity one-per-user="mixin: headache"></a-entity>
                    
                        <a-entity one-per-user="mixin: fire-fist"></a-entity>
                    </a-scene>
                </body>
            </html>
            
     </body>
  