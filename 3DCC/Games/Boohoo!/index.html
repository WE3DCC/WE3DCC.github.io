<html>
        <head>
            <script src="//aframe.io/releases/0.3.0/aframe.js"></script>
            <script src="https://sdk.altvr.com/libs/altspace.js/2.6.1/altspace.min.js"></script>
            <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
            <script> AFRAME.registerComponent('cursor-listener', {
                    init: function () {
                      var COLORS = ['red', 'green', 'blue'];
                      this.el.addEventListener('click', function () {
                        var randomIndex = Math.floor(Math.random() * COLORS.length);
                        this.setAttribute('material', 'color', COLORS[randomIndex]);
                        console.log('I was clicked!');
                      });
                    }
                  });
            </script>
        </head>
        <body>
        <a-scene altspace="fullspace: true" sync-system="author: 3dcc; app: boohootheghost">
            <a-assets timeout="5000">
                	<a-asset-item id="boohooObj" src="BooHootheGhost.obj"></a-asset-item>
                    <img id="boohooMtl" src="BooHootheGhost.mtl">
                    
                    <a-mixin id="voxel-axe"
					geometry='primitive: box; width: .9; depth: .1; height: .03' material='shader: flat; color: #606060'
					position='.5 0 0' scale="1 1 1"
                    animation="property: rotation; from: 0 0 0; to: 360 0 0; dir: reverse; startEvents: spin"></a-mixin>
                
				<a-mixin id="parent-to-left-hand"
					rotation="0 0 0"
					n-skeleton-parent="part: hand; side: left;"
                    sync sync-n-skeleton-parent></a-mixin>
            
                    
                <a-mixin id="boohoo"
                obj-model="obj: #boohooObj; mtl: #boohooMtl"
                scale="0.52 0.52 0.52"
                animation="to: #BooMoveSpot; direction: alternate fill: forwards; repeat: indefinite"
                sync="ownOn: connected" sync-transform></a-mixin>
                    
				<a-mixin id="parent-to-head"
					position="0 0.05 0.03"
					n-skeleton-parent="part: head; side: right"
                    sync sync-n-skeleton-parent></a-mixin>

                <a-mixin id="left-box"
                    geometry="primitive: box"
                    material="color: red"
                    n-skeleton-parent="part: hand; side: left; index: 0;"
                    sync sync-n-skeleton-parent
                    position="0 0.1 0"
                    rotation="0 45 0"
                    scale="0.1 0.1 0.1">
                </a-mixin>
        
                <a-mixin id="body-ball"
                    position="0 0.25 -0.25"
                    n-spawner="res:interactables/basketball"
                    n-skeleton-parent="part: spine;"
                    sync sync-n-skeleton-parent>
                </a-mixin>
        
                <a-mixin id="spinal-tap"
                    n-sound="res: ui/error; volume: 0.5; loop: true; autoplay: true;"
                    n-skeleton-parent="part: spine;"
                    sync sync-n-skeleton-parent>
                </a-mixin>
        
                <a-mixin id="other-text"
                    position="0 1.5 0"
                    rotation="0 180 0"
                    scale="0.5 0.5 0.5"
                    n-text="fontSize: 2; text: text other people can read"
                    n-skeleton-parent="part: hips;"
                    sync sync-n-skeleton-parent>
                </a-mixin>
                
        
                <a-mixin id="head-text"
                    position="0.2 0.2 -0.5"
                    scale="0.1 0.1 0.1"
                    n-text="fontSize: 2; text: avoid text on the head \n annoying isn't it :-)"
                    n-skeleton-parent="part: head;"
                    sync sync-n-skeleton-parent>
                </a-mixin>
        
                <a-mixin id="headache"
                    n-object="res:effects/fire"
                    n-skeleton-parent="part: head;"
                    sync sync-n-skeleton-parent>
                </a-mixin>
        
                <a-mixin id="fire-fist"
                    n-object="res:effects/fire-trail"
                    n-skeleton-parent="part: hand; side: right"
                    sync sync-n-skeleton-parent>
                </a-mixin>
            </a-assets>
            <!-- End Assets -->
            <!-- NEED: Flashlight Raycaster model -->
                <!-- Cursor -->
            <a-entity
                cursor="fuse: true; fuseTimeout: 500"
                raycaster="far: 30; interval:1000; objects: .clickable"
                position="0 0 -1"
                rotation="45 0 90"
                geometry="primitive: cone; height: 5; color: #EAE112; radius-top: 0.5; radius-bottom: 3"
                material="color: #54EA12; shader: flat; opacity"></a-entity>
			<a-entity
            id="initial-synced-box"
            one-per-user="mixin: voxel-axe parent-to-left-hand">
        </a-entity>
    
        <!-- BooHoo Instantiator -->
        <a-entity
            id="boohoo-instantiator"
            class="clickable"
            mixin="boohoo"
            randoompositon
            cursor-listener
            instantiator="on: connected; mixin: boohoo; removeLast: true"
            altspace-cursor-collider>
        </a-entity>
        <a-entity n-object="boohoo"
        randomposition></a-entity>

            <a-entity one-per-user="mixin: left-box"></a-entity>
        
            <a-entity one-per-user="mixin: body-ball"></a-entity>
        
            <a-entity one-per-user="mixin: spinal-tap"></a-entity>
        
            <a-entity
                position="0 1 -1"
                scale="0.5 0.5 0.5"
                n-text="fontSize: 2; text: text in the world">
            </a-entity>
        
            <a-entity one-per-user="mixin: other-text"></a-entity>
        
            <a-entity
                position="0 0 -0.7"
                scale="0.2 0.2 0.2"
                rotation="-30 0 0"
                n-text="fontSize: 2; text: text you can read comfortably"
                n-cockpit-parent>
            </a-entity>
        
            <a-entity one-per-user="mixin: head-text"></a-entity>
        
            <a-entity one-per-user="mixin: headache"></a-entity>
        
            <a-entity one-per-user="mixin: fire-fist"></a-entity>
        </a-scene>
    </body>
</html>